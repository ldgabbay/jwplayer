<?xml version="1.0" encoding="iso-8859-1"?>
<project name="JW Player Core JavaScript Library" default="build-debug" basedir="..">

	<target name="clean">
		<delete file="${basedir}/bin-debug/jwplayer.js" quiet="true"/>
		<delete file="${basedir}/jwplayercore.min.js" quiet="true"/>
	</target>

	<target name="concat" depends="clean">
		<concat destfile="${basedir}/bin-debug/jwplayer.js">
			<fileset dir="${basedir}/src" includes="jwplayer.js" />
			<fileset dir="${basedir}/src/utils" includes="**/*.js" excludes="jwplayer.utils.extensionmap.js" />
			<fileset dir="${basedir}/src/utils" includes="jwplayer.utils.extensionmap.js" />
			<fileset dir="${basedir}/src/api" includes="**/*.js" />
			<fileset dir="${basedir}/src/embed" includes="**/*.js" />
			<fileset dir="${basedir}/src/html5" includes="jwplayer.html5.js" />
			<fileset dir="${basedir}/src/html5" includes="jwplayer.html5.utils.js" />
			<fileset dir="${basedir}/src/html5" includes="jwplayer.html5.states.js" />
			<fileset dir="${basedir}/src/html5" includes="jwplayer.html5.events.js" />
			<fileset dir="${basedir}/src/html5" includes="jwplayer.html5.view.js" />
			<fileset dir="${basedir}/src/html5" includes="jwplayer.html5.*.js" excludes="jwplayer.html5.js,jwplayer.html5.states.js,jwplayer.html5.events.js,jwplayer.html5.utils.js,jwplayer.html5.api.js,jwplayer.html5.view.js" />
			<fileset dir="${basedir}/src/html5" includes="jwplayer.html5.api.js" />
		</concat>
	</target>

	<target name="build-debug">
		<antcall target="concat">
			<param name="outputpath" value="${basedir}/bin-debug/jwplayer.js"/>
		</antcall>
		<copy file="${basedir}/bin-debug/jwplayer.js" tofile="${basedir}/jwplayer.min.js" />
	</target>

	<target name="build-release" depends="concat">
		<replace file="${basedir}/jwplayer.min.js" token=", logoConfig);" value=");"/>
		<java jar="${basedir}/build/yuicompressor-2.4.2.jar" fork="true">
			<arg line="'${basedir}/bin-debug/jwplayer.js'"/>
			<arg line="-o '${basedir}/jwplayer.min.js'"/>
		</java>
	</target>
</project>