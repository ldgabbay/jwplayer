<?xml version="1.0" encoding="iso-8859-1"?>
<project name="JW Player Core JavaScript Library" default="build-debug" basedir="..">

	<target name="clean">
		<delete file="${basedir}/bin-debug/jwplayer.js" quiet="true"/>
		<delete file="${basedir}/jwplayercore.min.js" quiet="true"/>
	</target>

	<target name="concat" depends="clean">
		<concat destfile="${basedir}/bin-debug/jwplayer.js">
			<fileset dir="${basedir}/src" includes="jwplayer.js" />
			<fileset dir="${basedir}/src/utils" includes="**/*.js" excludes="jwplayer.utils.extensionmap.js" />
			<fileset dir="${basedir}/src/utils" includes="jwplayer.utils.extensionmap.js" />
			<fileset dir="${basedir}/src/api" includes="**/*.js" />
			<fileset dir="${basedir}/src/embed" includes="**/*.js" />
		</concat>
	</target>

	<target name="build-debug">
		<antcall target="concat" />
	</target>

	<target name="build-release" depends="concat">
		<java jar="${basedir}/build/yuicompressor-2.4.2.jar" fork="true">
			<arg line="'${basedir}/bin-debug/jwplayer.js'"/>
			<arg line="-o '${basedir}/jwplayer.min.js'"/>
		</java>
	</target>

	<target name="build-release-with-html5" depends="build-release">
		<concat destfile="${basedir}/jwplayer.min.js" append="true">
			<filelist dir="${basedir}/../html5" files="jwplayer.html5.min.js" />
		</concat>
	</target>
</project>