<!doctype html>
<html>
	<head>
	  <title>Quality API test</title>
	  <script src="../bin-debug/jwplayer.js"></script>

	  <script type="text/javascript">
		  function init() {
  	 		var form = document.getElementById("form");
		    var player = jwplayer("player").setup({
		      id: "player", 
		      file: 'http://www.youtube.com/watch?v=XSGBVzeBUbk',
          title: "Big Buck Bunny",
		      width: "100%",
		      height: "100%",
		      primary: form.mode.options[form.mode.selectedIndex].value,
		      events: {
		        onQualityLevels: qualityLevels,
		        onQualityChange: qualityChanged
		      },
		      width: 720,
		      height: 370
		    });
		  }

      function setQuality(level) {
        document.getElementById("currentQuality").innerHTML = level ? "setting..." : "auto";
        jwplayer("player").setCurrentQuality(level);
      }

      function qualityLevels(evt) {
        var levels = this.getQualityLevels();
        var list = document.getElementById("qualityLevels");
        list.innerHTML = "";
        for (var i=0; i<levels.length; i++) {
          var item = document.createElement("li");
          item.innerHTML = "<a href='#' onclick='setQuality(" + i + "); return false'>" + levels[i].label + "</a>";
          list.appendChild(item);
        }
      }
      
      function qualityChanged(evt) {
        var label = document.getElementById("currentQuality");
        label.innerHTML = this.getQualityLevels()[this.getCurrentQuality()].label;
      }
	  </script>
	</head>
	
	<body onload="init()">
	
    <form id="form">
	  mode: <select name="mode" onchange="init()">
      	<option value="" selected>html5</option>
      	<option value="flash">flash</option>
      </select>
      <input type="submit" style="opacity:0; left: -10000px"/>
    </form>
    
	<div class="wrapper">
	    <div id="player"></div>
	</div>
	
	<p><strong>Current Quality: </strong><span id="currentQuality">auto</span></p>
	<p><strong>Quality Levels: </strong><ul id="qualityLevels"></ul></p>

	</body>
</html>
