<?xml version="1.0" encoding="iso-8859-1"?>
<project name="JW Player for HTML5" default="build-debug" basedir="..">

	<target name="clean">
		<delete file="${basedir}/jwplayer.js" quiet="true"/>
		<delete file="${basedir}/jwplayer.min.js" quiet="true"/>
	</target>

	<target name="concat" depends="clean">
		<concat destfile="${outputpath}">
			<fileset dir="${basedir}/src/html5" includes="jwplayer.html5.js" />
			<fileset dir="${basedir}/src/html5" includes="jwplayer.html5.utils.js" />
			<fileset dir="${basedir}/src/html5" includes="jwplayer.html5.states.js" />
			<fileset dir="${basedir}/src/html5" includes="jwplayer.html5.events.js" />
			<fileset dir="${basedir}/src/html5" includes="jwplayer.html5.view.js" />
			<fileset dir="${basedir}/src/html5" includes="jwplayer.html5.*.js" excludes="jwplayer.html5.js,jwplayer.html5.states.js,jwplayer.html5.events.js,jwplayer.html5.utils.js,jwplayer.html5.api.js,jwplayer.html5.view.js" />
			<fileset dir="${basedir}/src/html5" includes="jwplayer.html5.api.js" />
		</concat>
	</target>

	<target name="build-debug">
		<antcall target="concat">
			<param name="outputpath" value="${basedir}/bin-debug/jwplayer.html5.js"/>
		</antcall>
	</target>
	
	<target name="build-release" depends="build-debug">
		<replace file="${basedir}/bin-debug/jwplayer.html5.js" token=", logoConfig);" value=");"/>
		<java jar="${basedir}/build/yuicompressor-2.4.2.jar" fork="true">
			<arg line="'${basedir}/bin-debug/jwplayer.html5.js'"/>
			<arg line="-o '${basedir}/jwplayer.html5.min.js'"/>
		</java>
	</target>

</project>